(this["webpackJsonpmoxy-proxy"]=this["webpackJsonpmoxy-proxy"]||[]).push([[3],{427:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return R}));var n=a(42),r=a.n(n),c=a(43),l=a(19),i=a(462),o=a(467),u=a(469),s=a(0),p=a.n(s),d=a(425),m=a.n(d),b=a(25),f=a(107),g=a(476),h=a(470),v=a(498),S=a(479),y=a(478),E=a(488),O=a(477),j=a(475),x=a(502),C=a(39),k=a(504),w=a(503),J=a(74),N=a.n(J);function A(e){var t=e.initialCode,a=e.autoHeight,n=e.language,r=e.valueGetter,c=e.onReady;var l=t.split(/\r\n|\r|\n/).length+3,i=a?"".concat(18*l,"px"):"500px";return p.a.createElement(N.a,{editorDidMount:function(e){c&&c(),r.current=e},height:i,language:n,value:t.trim(),width:"100%"})}var T=Object(j.a)((function(e){return Object(x.a)({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}));function D(){var e=Object(s.useState)(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],u=T(),d=Object(C.a)(),m=Object(g.a)(d.breakpoints.down("xs")),f=Object(s.useContext)(b.AppStateContext),j=f.addServerStateScenario,x=f.serverState,J=Object(s.useState)({}),N=Object(l.a)(J,2),D=N[0],H=N[1],W=Object(s.useState)(""),B=Object(l.a)(W,2),F=B[0],M=B[1],R=Object(s.useRef)(),G=JSON.stringify(D,null,2);function P(){n(!1)}function U(){return(U=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R.current){e.next=4;break}return e.next=3,j({id:Date.now().toString(),name:F,state:JSON.parse(R.current())});case 3:n(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return p.a.createElement(p.a.Fragment,null,p.a.createElement(o.a,{onClick:function(){n(!0),H(x)}},"Add server scenario"),p.a.createElement(v.a,{closeAfterTransition:!0,"aria-labelledby":"max-width-dialog-title",fullScreen:m,maxWidth:"md",open:a,onClose:P},p.a.createElement(O.a,{disableTypography:!0,id:"max-width-dialog-title",style:{minWidth:500}},p.a.createElement(i.a,{variant:"h6"},"Add server scenario"),p.a.createElement(h.a,{"aria-label":"close",className:u.closeButton,onClick:P},p.a.createElement(w.a,null))),p.a.createElement(y.a,null,p.a.createElement(k.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Scenario name",margin:"dense",value:F,onChange:function(e){M(e.target.value)}})),p.a.createElement(y.a,null,p.a.createElement(E.a,null,"Modify copy of state before adding"),p.a.createElement(A,{autoHeight:!0,initialCode:G,language:"json",valueGetter:R})),p.a.createElement(S.a,null,p.a.createElement(o.a,{onClick:function(){return U.apply(this,arguments)}},"Submit"))))}var H=a(428),W=a(140),B=a(95),F=a.n(B);function M(e){var t=e.actions,a=Object(s.useState)(null),n=Object(l.a)(a,2),r=n[0],c=n[1],i=Boolean(r),o=function(){c(null)};return p.a.createElement("div",null,p.a.createElement(h.a,{"aria-controls":"server-state-menu","aria-haspopup":"true","aria-label":"more",onClick:function(e){c(e.currentTarget)}},p.a.createElement(F.a,null)),p.a.createElement(H.a,{keepMounted:!0,anchorEl:r,id:"server-state-menu",open:i,PaperProps:{style:{maxHeight:216,width:200}},onClose:o},t.map((function(e){var t,a=e.label,n=e.onClick;return p.a.createElement(W.a,{key:a,onClick:(t=n,function(){o(),t()})},a)}))))}function R(){var e=Object(s.useContext)(b.AppStateContext),t=e.serverState,a=e.resetServerState,n=e.updateServerState,d=e.deleteStateScenario,g=Object(s.useState)(!1),h=Object(l.a)(g,2),v=h[0],S=h[1],y=Object(s.useState)(!1),E=Object(l.a)(y,2),O=E[0],j=E[1],x=Object(s.useState)(JSON.stringify(t,null,2)),C=Object(l.a)(x,2),k=C[0],w=C[1];function J(){return(J=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.readText();case 2:t=e.sent;try{n(JSON.parse(t))}catch(a){console.error(["handleUpdateWithClipboard.error"],a.toString())}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(JSON.stringify(t,null,2));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},p.a.createElement(i.a,{style:{margin:8},variant:"h5"},"Server state"),p.a.createElement("div",{style:{display:"flex"}},v?p.a.createElement(o.a,{disabled:O,onClick:function(){S(!1),n(JSON.parse(k))}},"Done"):p.a.createElement(o.a,{onClick:function(){S(!0)}},"Edit"),p.a.createElement(D,null),p.a.createElement(M,{actions:[{label:"Reset server",onClick:a},{label:"Copy to clipboard",onClick:function(){return N.apply(this,arguments)}},{label:"Update with clipboard",onClick:function(){return J.apply(this,arguments)}},{label:"Delete scenario",onClick:function(){d()}}]}))),p.a.createElement(u.a,{style:{padding:10}},!v&&p.a.createElement(m.a,{name:"state",src:t}),v&&p.a.createElement(f.a,{autoHeight:!0,code:k,language:"json",onSave:function(e){w(e);try{JSON.parse(e),j(!1)}catch(t){j(!0)}}})))}}}]);
//# sourceMappingURL=3.d16c690e.chunk.js.map