(this["webpackJsonpmoxy-proxy"]=this["webpackJsonpmoxy-proxy"]||[]).push([[10],{160:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t),n.d(t,"AppStateContext",(function(){return E}));var a=n(42),r=n.n(a),c=n(97),o=n(43),i=n(19),l=n(0),u=n.n(l);n(160);function s(e,t){var n=Object(l.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),a=Object(i.a)(n,2),r=a[0],c=a[1];return[r,Object(l.useCallback)((function(t){try{window.localStorage.setItem(e,JSON.stringify(t)),c(t)}catch(n){console.error(n)}}),[e])]}var d=Object(l.lazy)((function(){return n.e(11).then(n.bind(null,497))})),p=Object(l.lazy)((function(){return n.e(12).then(n.bind(null,500))})),S=Object(l.lazy)((function(){return n.e(13).then(n.bind(null,501))})),f=Object(l.lazy)((function(){return Promise.all([n.e(2),n.e(14)]).then(n.bind(null,480))}));function v(){var e=Object(l.useContext)(E).viewMode;return u.a.createElement(u.a.Fragment,null,u.a.createElement(l.Suspense,{fallback:"Loading header..."},u.a.createElement(d,null)),"tabs"===e&&u.a.createElement(l.Suspense,{fallback:"Loading tabs layout..."},u.a.createElement(f,null)),"panels"===e&&u.a.createElement(l.Suspense,{fallback:"Loading panel layout..."},u.a.createElement(S,null)),"board"===e&&u.a.createElement(l.Suspense,{fallback:"Loading board layout..."},u.a.createElement(p,null)))}var b=n(98);function m(){return{}}function O(){return[]}var E=Object(l.createContext)({activeTab:"serverState",activeServerStateScenarioId:"default",viewMode:"tabs",serverState:{},endpoints:[],serverStateInterface:"",serverStateScenarios:[],persistEndpoints:function(){},persistMockedData:function(){},changeViewMode:function(e){},changeActiveTab:function(e){},addServerStateScenario:function(e){},changeServerStateScenario:function(e){},updateServerState:function(e){},resetServerState:function(){},deleteStateScenario:function(){},addEndpoint:function(e){},deleteEndpoint:function(e){},changeEndpointResponseStatus:function(e,t){},updateEndpoint:function(e){},testEndpoint:function(e,t,n,a){return Promise.resolve(new Response(""))}});function g(){return Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_URL:"https://moxy-proxy.herokuapp.com"}var y=new WebSocket(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SOCKET_URL?Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SOCKET_URL:"wss://moxy-proxy.herokuapp.com/superHash123");function j(e){console.log(["sendEvent"],e);try{y.send(JSON.stringify(e))}catch(t){console.error(t)}}t.default=function(){var e=s("activeTab","serverState"),t=Object(i.a)(e,2),n=t[0],a=t[1],d=s("activeServerStateScenarioId","default"),p=Object(i.a)(d,2),S=p[0],f=p[1],h=s("viewMode","tabs"),C=Object(i.a)(h,2),T=C[0],_=C[1],k=Object(l.useState)(m),w=Object(i.a)(k,2),x=w[0],P=w[1],R=Object(l.useState)([]),A=Object(i.a)(R,2),D=A[0],I=A[1],N=Object(l.useState)(""),L=Object(i.a)(N,2),U=L[0],W=L[1],J=Object(l.useState)(O),K=Object(i.a)(J,2),q=K[0],H=K[1],B=Object(l.useCallback)((function(e){var t=e.action,n=e.payload;({updateEndpoints:function(e){H(e)},updateServerState:function(e){P(e)},updateServerStateInterface:function(e){W(e)},updateActiveStateScenarioId:function(e){f(e)},updateServerStateScenarios:function(e){I(e)}})[t](n)}),[f]);function M(){return(M=Object(o.a)(r.a.mark((function e(t,n,a,c){var o,i,l,u,s,d,p,S;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=function(e,t){var n=e.split("/").filter(Boolean).reduce((function(e,n){return n[0]===b.b?"".concat(e,"/").concat(t[n.slice(1)]):"".concat(e,"/").concat(n)}),"");return"".concat(g()).concat(n)},o=t.url,i=t.method,l=JSON.parse(c),u="get"===i||0===Object.keys(l).length,s=u?void 0:JSON.stringify(l),d=u?void 0:{Accept:"application/json","Content-Type":"application/json"},S="".concat(p(o,n),"?").concat(a),console.log(["parsedUrl"],S),e.next=10,fetch(S,{body:s,method:i,headers:d,credentials:"include"});case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(l.useEffect)((function(){y.onopen=function(e){console.log(["WebSocket.onopen"],e)},y.onclose=function(e){console.log(["WebSocket.onclose"],e),setTimeout((function(){window.location.reload()}),3e3)},y.onmessage=function(e){console.log(["WebSocket.onmessage"],JSON.parse(e.data)),B(function(e){var t=JSON.parse(e);return{action:t.action,payload:t.payload}}(e.data))},y.onerror=function(e){console.error(["WebSocket.onerror"],e)};var e=setInterval((function(){j({action:"ping"})}),1e4);return function(){clearInterval(e)}}),[B]);var z={activeTab:n,activeServerStateScenarioId:S,endpoints:q,serverState:x,serverStateInterface:U,serverStateScenarios:D,viewMode:T,persistEndpoints:function(){j({action:"persistEndpoints"})},persistMockedData:function(){j({action:"persistMockedData"})},changeEndpointResponseStatus:function(e,t){j({action:"changeEndpointResponseStatus",payload:{endpointId:e,status:t}})},addServerStateScenario:function(e){I((function(t){return[].concat(Object(c.a)(t),[e])})),j({action:"addServerStateScenario",payload:e})},deleteStateScenario:function(){j({action:"deleteStateScenario",payload:S})},changeServerStateScenario:function(e){j({action:"changeServerStateScenario",payload:e}),f(e)},changeViewMode:_,changeActiveTab:a,updateServerState:function(e){P(e),j({action:"clientUpdatedServer",payload:{serverStateScenarioId:S,state:e}})},resetServerState:function(){j({action:"resetServerState"})},addEndpoint:function(e){j({action:"addEndpoint",payload:e})},updateEndpoint:function(e){j({action:"updateEndpoint",payload:e})},deleteEndpoint:function(e){j({action:"deleteEndpoint",payload:e})},testEndpoint:function(e,t,n,a){return M.apply(this,arguments)}};return u.a.createElement("div",{className:"App"},u.a.createElement(E.Provider,{value:z},u.a.createElement(v,null)))}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(19),r=n(467),c=n(462),o=n(0),i=n.n(o),l=n(492),u=n(74);function s(e){var t=e.code,n=e.title,s=e.language,d=void 0===s?"javascript":s,p=e.onSave,S=Object(o.useState)(t),f=Object(a.a)(S,2),v=f[0],b=f[1],m=Object(o.useState)(!1),O=Object(a.a)(m,2),E=O[0],g=O[1],y=Object(o.useState)(!1),j=Object(a.a)(y,2),h=j[0],C=j[1];return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement(c.a,{variant:"body1"},n),h&&E?i.a.createElement(r.a,{onClick:function(){g(!1),p(v)}},"Done"):i.a.createElement(r.a,{onClick:function(){return g(!0)}},"Edit")),i.a.createElement("div",null,E?i.a.createElement(u.a,{autoHeight:!0,code:v,language:d,onReady:function(){C(!0)},onSave:b}):i.a.createElement(l.a,{language:d},t.trim())))}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(107),r=n.n(a),c=n(0),o=n.n(c);function i(e){var t=e.onSave,n=e.code,a=e.autoHeight,i=e.language,l=e.onReady,u=Object(c.useRef)();!function(e,t){Object(c.useEffect)((function(){var n=setInterval((function(){e.current&&t(e.current())}),500);return function(){clearInterval(n)}}),[e,t])}(u,t);var s=n.split(/\r\n|\r|\n/).length+3,d=a?"".concat(18*s,"px"):"500px";return o.a.createElement(r.a,{editorDidMount:function(e){l&&l(),u.current=e},height:d,language:i,value:n.trim(),width:"100%"})}},98:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return N}));var a=n(42),r=n.n(a),c=n(43),o=n(19),i=n(37),l=n(32),u=n(476),s=n(470),d=n(467),p=n(498),S=n(479),f=n(478),v=n(477),b=n(475),m=n(502),O=n(39),E=n(462),g=n(503),y=n(0),j=n.n(y),h=n(492),C=n(25),T=n(33),_=n(499),k=n(423),w=n.n(k);function x(e){var t=e.endpoint,n=e.queryString,a=e.requestBody,i=Object(y.useState)(!1),l=Object(o.a)(i,2),u=l[0],p=l[1],S=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,navigator.clipboard.writeText('curl -i --header "Content-Type: application/json" --request '.concat(t.method.toLocaleUpperCase()," --data '").concat(JSON.stringify(JSON.parse(a)),"' ").concat(window.location.origin,"/").concat(t.url,"?").concat(n));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e,t){"clickaway"!==t&&p(!1)};return j.a.createElement("div",null,j.a.createElement(d.a,{onClick:S},"Copy CURL to clipboard"),j.a.createElement(_.a,{action:j.a.createElement(s.a,{"aria-label":"close",color:"inherit",size:"small",onClick:f},j.a.createElement(w.a,{fontSize:"small"})),anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:6e3,message:"CURL copied to clipboard!",open:u,onClose:f}))}var P=n(504);function R(e){var t=e.endpoint,n=e.queryParams,a=e.setQueryParams;return j.a.createElement(j.a.Fragment,null,j.a.createElement(E.a,{variant:"subtitle2"},"Fill query parameters"),j.a.createElement("div",{style:{display:"flex"}},t.parameters.map((function(e,t){e.id;var r=e.name;e.type;return j.a.createElement(j.a.Fragment,null,j.a.createElement(E.a,{style:{marginTop:20,marginRight:5},variant:"body1"},"".concat(t>0?"& ":"").concat(r," = ")),j.a.createElement(P.a,{label:r,placeholder:"Set query parameter value",value:n[r],onChange:function(e){a(Object(l.a)(Object(l.a)({},n),{},Object(i.a)({},r,e.target.value)))}}))}))))}function A(e){var t=e.endpoint,n=e.urlParameters,a=e.setUrlParameters,r=t.url.split("/").filter(Boolean);return j.a.createElement(j.a.Fragment,null,j.a.createElement(E.a,{style:{flexGrow:1},variant:"subtitle2"},"Fill url parameters"),j.a.createElement("div",{style:{display:"flex"}},r.map((function(e){if(":"===e[0]){var t=e.slice(1),r=n[t];return j.a.createElement(P.a,{required:!0,label:t,placeholder:"Set parameter value",value:r,onChange:function(e){a(Object(l.a)(Object(l.a)({},n),{},Object(i.a)({},t,e.target.value)))}})}return j.a.createElement(E.a,{style:{marginTop:20,marginRight:5},variant:"body1"},"".concat(e," /"))}))))}var D=Object(b.a)((function(e){return Object(m.a)({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})})),I=":";function N(e){var t=e.endpoint,n=Object(y.useState)(!1),a=Object(o.a)(n,2),b=a[0],m=a[1],_=Object(y.useState)("\n{}\n"),k=Object(o.a)(_,2),w=k[0],P=k[1],N=Object(y.useState)(!1),L=Object(o.a)(N,2),U=L[0],W=L[1],J=Object(y.useState)(""),K=Object(o.a)(J,2),q=K[0],H=K[1],B=Object(O.a)(),M=D(),z=Object(u.a)(B.breakpoints.down("xs")),F=Object(y.useContext)(C.AppStateContext).testEndpoint,V=Object(y.useState)(t.url.split("/").filter(Boolean).reduce((function(e,t){return t[0]===I?Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},t.slice(1),"")):e}),{})),Q=Object(o.a)(V,2),G=Q[0],X=Q[1],Y=Object(y.useState)(function(e){return e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(i.a)({},t.name,""))}),{})}(t.parameters)),Z=Object(o.a)(Y,2),$=Z[0],ee=Z[1];function te(){m(!1)}function ne(e){return Object.entries(e).reduce((function(e,t){var n=Object(o.a)(t,2),a=n[0],r=n[1];return"".concat(e,"&").concat(a,"=").concat(r)}),"")}function ae(){return(ae=Object(c.a)(r.a.mark((function e(){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ne($),e.next=3,F(t,G,n,w);case 3:if(!((a=e.sent).status<300)){e.next=15;break}return e.prev=5,e.next=8,a.json();case 8:c=e.sent,H(JSON.stringify(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),H("");case 15:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}return j.a.createElement("div",null,j.a.createElement(d.a,{onClick:function(){m(!0)}},"Test endpoint"),j.a.createElement(p.a,{closeAfterTransition:!0,"aria-labelledby":"max-width-dialog-title",fullScreen:z,maxWidth:"md",open:b,onClose:te},j.a.createElement(v.a,{disableTypography:!0,id:"max-width-dialog-title",style:{minWidth:500}},j.a.createElement(E.a,{style:{marginRight:40},variant:"h6"},"Test endpoint ".concat(t.method,":").concat(t.url)),j.a.createElement(s.a,{"aria-label":"close",className:M.closeButton,onClick:te},j.a.createElement(g.a,null))),Object.keys(G).length>0&&j.a.createElement(f.a,null,j.a.createElement(A,{endpoint:t,setUrlParameters:X,urlParameters:G})),t.parameters.length>0&&j.a.createElement(f.a,null,j.a.createElement(R,{endpoint:t,queryParams:$,setQueryParams:ee})),j.a.createElement(f.a,null,U?j.a.createElement(T.a,{code:w,language:"json",title:"Request body",onSave:P}):j.a.createElement(d.a,{onClick:function(){return W(!0)}},"Add request body")),j.a.createElement(f.a,null,q&&j.a.createElement(j.a.Fragment,null,j.a.createElement(E.a,{variant:"body1"},"Response"),j.a.createElement(h.a,{language:"json"},JSON.stringify(JSON.parse(q),null,2)))),j.a.createElement(S.a,null,j.a.createElement(x,{endpoint:t,queryString:ne($),requestBody:w}),j.a.createElement(d.a,{onClick:function(){return ae.apply(this,arguments)}},"Test"))))}}}]);
//# sourceMappingURL=10.23199d00.chunk.js.map