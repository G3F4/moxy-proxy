{"version":3,"sources":["modules/server-state/add-server-scenario/AddServerScenario.tsx","modules/server-state/ServerStateMenu.tsx","modules/server-state/ServerState.tsx"],"names":["useStyles","makeStyles","theme","createStyles","closeButton","position","right","spacing","top","color","palette","grey","AddServerScenario","useState","open","setOpen","classes","useTheme","fullScreen","useMediaQuery","breakpoints","down","useContext","AppStateContext","addServerStateScenario","serverState","scenarioServerState","setScenarioServerState","name","setName","handleClose","code","JSON","stringify","Button","onClick","Dialog","closeAfterTransition","aria-labelledby","maxWidth","onClose","DialogTitle","disableTypography","id","style","minWidth","Typography","variant","IconButton","aria-label","className","Close","DialogContent","TextField","autoFocus","fullWidth","label","margin","value","onChange","event","target","DialogContentText","Editor","autoHeight","language","onSave","parse","DialogActions","a","async","Date","now","toString","state","ServerStateMenu","actions","anchorEl","setAnchorEl","Boolean","aria-controls","aria-haspopup","currentTarget","Menu","keepMounted","PaperProps","maxHeight","ITEM_HEIGHT","width","map","action","MenuItem","key","ServerState","resetServerState","updateServerState","deleteStateScenario","editing","setEditing","invalidJson","setInvalidJson","draftCode","setDraftCode","display","justifyContent","alignItems","disabled","navigator","clipboard","writeText","readText","e","console","error","Paper","padding","src"],"mappings":"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","file":"static/js/3.bfd0de6b.chunk.js","sourcesContent":["import { IconButton, Typography, useMediaQuery } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport { Close } from '@material-ui/icons';\nimport React, { ChangeEvent, useContext, useState } from 'react';\nimport { AppStateContext } from '../../../App';\nimport { Editor } from '../../../common/Editor';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500],\n    },\n  }),\n);\n\nexport default function AddServerScenario() {\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('xs'));\n  const { addServerStateScenario, serverState } = useContext(AppStateContext);\n  const [scenarioServerState, setScenarioServerState] = useState(serverState);\n  const [name, setName] = useState('');\n\n  function handleClickOpen() {\n    setOpen(true);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function handleNameChange(event: ChangeEvent<HTMLInputElement>) {\n    setName(event.target.value);\n  }\n\n  async function handleSubmit() {\n    await addServerStateScenario({\n      id: Date.now().toString(),\n      name,\n      state: scenarioServerState,\n    });\n    setOpen(false);\n  }\n\n  function handleSave(code: string) {\n    setScenarioServerState(JSON.parse(code));\n  }\n\n  const code = JSON.stringify(scenarioServerState, null, 2);\n\n  return (\n    <>\n      <Button onClick={handleClickOpen}>Add server scenario</Button>\n      <Dialog\n        closeAfterTransition\n        aria-labelledby=\"max-width-dialog-title\"\n        fullScreen={fullScreen}\n        maxWidth=\"md\"\n        open={open}\n        onClose={handleClose}\n      >\n        <DialogTitle\n          disableTypography\n          id=\"max-width-dialog-title\"\n          style={{ minWidth: 500 }}\n        >\n          <Typography variant=\"h6\">Add server scenario</Typography>\n          <IconButton\n            aria-label=\"close\"\n            className={classes.closeButton}\n            onClick={handleClose}\n          >\n            <Close />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            fullWidth\n            id=\"name\"\n            label=\"Scenario name\"\n            margin=\"dense\"\n            value={name}\n            onChange={handleNameChange}\n          />\n        </DialogContent>\n        <DialogContent>\n          <DialogContentText>\n            Modify copy of state before adding\n          </DialogContentText>\n          <Editor autoHeight code={code} language=\"json\" onSave={handleSave} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleSubmit}>Submit</Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React, { useState, MouseEvent } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nconst ITEM_HEIGHT = 48;\n\nexport default function ServerStateMenu({\n  actions,\n}: {\n  actions: Array<{ label: string; onClick: () => void }>;\n}) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event: MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  function handleActionClick(action: () => void) {\n    return () => {\n      handleClose();\n      action();\n    };\n  }\n\n  return (\n    <div>\n      <IconButton\n        aria-controls=\"server-state-menu\"\n        aria-haspopup=\"true\"\n        aria-label=\"more\"\n        onClick={handleClick}\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        keepMounted\n        anchorEl={anchorEl}\n        id=\"server-state-menu\"\n        open={open}\n        PaperProps={{\n          style: {\n            maxHeight: ITEM_HEIGHT * 4.5,\n            width: 200,\n          },\n        }}\n        onClose={handleClose}\n      >\n        {actions.map(({ label, onClick }) => (\n          <MenuItem key={label} onClick={handleActionClick(onClick)}>\n            {label}\n          </MenuItem>\n        ))}\n      </Menu>\n    </div>\n  );\n}\n","import { Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport React, { useContext, useState } from 'react';\nimport ReactJson from 'react-json-view';\nimport { ServerState as ServerStateInterface } from '../../../interfaces';\nimport { AppStateContext } from '../../App';\nimport { Editor } from '../../common/Editor';\nimport AddServerScenario from './add-server-scenario/AddServerScenario';\nimport ServerStateMenu from './ServerStateMenu';\n\nexport default function ServerState() {\n  const {\n    serverState,\n    resetServerState,\n    updateServerState,\n    deleteStateScenario,\n  } = useContext(AppStateContext);\n  const [editing, setEditing] = useState(false);\n  const [invalidJson, setInvalidJson] = useState(false);\n  const [draftCode, setDraftCode] = useState(\n    JSON.stringify(serverState, null, 2),\n  );\n\n  function handleStartEditing() {\n    setEditing(true);\n  }\n\n  function handleDoneEditing() {\n    setEditing(false);\n    updateServerState(JSON.parse(draftCode) as ServerStateInterface);\n  }\n\n  function handleSave(code: string) {\n    setDraftCode(code);\n    try {\n      JSON.parse(code);\n      setInvalidJson(false);\n    } catch (e) {\n      setInvalidJson(true);\n    }\n  }\n\n  async function handleUpdateWithClipboard() {\n    const serverState = await navigator.clipboard.readText();\n\n    try {\n      updateServerState(JSON.parse(serverState));\n    } catch (e) {\n      console.error(['handleUpdateWithClipboard.error'], e.toString());\n    }\n  }\n\n  function handleDeleteScenario() {\n    deleteStateScenario();\n  }\n\n  async function handleCopyToClipboard() {\n    await navigator.clipboard.writeText(JSON.stringify(serverState, null, 2));\n  }\n\n  return (\n    <>\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n      >\n        <Typography style={{ margin: 8 }} variant=\"h5\">\n          Server state\n        </Typography>\n        <div style={{ display: 'flex' }}>\n          {editing ? (\n            <Button disabled={invalidJson} onClick={handleDoneEditing}>\n              Done\n            </Button>\n          ) : (\n            <Button onClick={handleStartEditing}>Edit</Button>\n          )}\n          <AddServerScenario />\n          <ServerStateMenu\n            actions={[\n              { label: 'Reset server', onClick: resetServerState },\n              { label: 'Copy to clipboard', onClick: handleCopyToClipboard },\n              {\n                label: 'Update with clipboard',\n                onClick: handleUpdateWithClipboard,\n              },\n              { label: 'Delete scenario', onClick: handleDeleteScenario },\n            ]}\n          />\n        </div>\n      </div>\n      <Paper style={{ padding: 10 }}>\n        {!editing && <ReactJson name=\"state\" src={serverState} />}\n        {editing && (\n          <Editor\n            autoHeight\n            code={draftCode}\n            language=\"json\"\n            onSave={handleSave}\n          />\n        )}\n      </Paper>\n    </>\n  );\n}\n"],"sourceRoot":""}